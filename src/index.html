<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="color-scheme" content="dark light" />
    <meta name="theme-color" content="#16161d" />
    <link rel="icon" type="image/x-icon" href="/assets/icon/favicon.ico" />

    <meta http-equiv="x-ua-compatible" content="IE=Edge" />

    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0" />
    <title>Stencil Component Starter</title>

    <script type="module" src="/build/hakion-ui.esm.js"></script>
    <script nomodule src="/build/hakion-ui.js"></script>
    <link rel="stylesheet" href="/build/hakion-ui.css" />
    <script>
      // If `prefers-color-scheme` is not supported, fall back to light mode.
      // In this case, light.css will be downloaded with `highest` priority.
      if (window.matchMedia('(prefers-color-scheme)').media === 'not all') {
        document.documentElement.style.display = 'none';
        document.head.insertAdjacentHTML(
          'beforeend',
          '<link rel="stylesheet" href="/build/hakion-ui.css" onload="document.documentElement.style.display = ``">'
        );
      }
    </script>
  </head>

  <body>
    <my-component first="Stencil" last="'Don't call me a framework' JS"></my-component>
    <my-alert text="example text"></my-alert>
    <p>
      Open a chrome dev console. Observe how clicking on "acknowledge" will differ from clicking on the "Clicked"
      button.
    </p>
    <button>acknowledge</button>
    <hakion-ui-root></hakion-ui-root>
    <script>
      var button = document.querySelector('button');
      function handleAcknowledgeClick(e) {
        var alert = document.querySelector('my-alert');
        alert.text = 'This is a very important alert!';
        console.log(e.target.text, e.detail.when);
      }
      button.addEventListener('click', handleAcknowledgeClick);

      document.addEventListener('acknowledge', handleAcknowledgeClick);
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)');

      toggleDarkTheme(prefersDark.matches);

      // Listen for changes to the prefers-color-scheme media query
      prefersDark.addListener((mediaQuery) => toggleDarkTheme(mediaQuery.matches));

      // Add or remove the "dark" class based on if the media query matches
      function toggleDarkTheme(shouldAdd) {
        document.body.classList.toggle('dark', shouldAdd);
      }
      // const toggle = document.querySelector('hakion-dark-mode-toggle');
      // const body = document.body;
      // const themeColor = document.querySelector('meta[name="theme-color"]');
      // const colorScheme = document.querySelector('meta[name="color-scheme"]');

      // Set or remove the `dark` class the first time.
      // toggle.mode === 'dark' ? body.classList.add('dark') : body.classList.remove('dark');
      // Listen for toggle changes (which includes `prefers-color-scheme` changes)
      // and toggle the `dark` class accordingly.
      // toggle.addEventListener('colorschemechange', () => {
      //   themeColor.content = getComputedStyle(body).color;
      //   colorScheme.content = e.detail.colorScheme;
      //   icon.href = e.detail.colorScheme === 'dark' ? 'moon.png' : 'sun.png';
      //   console.log(`${e.target.id} changed the color scheme to ${e.detail.colorScheme}`);
      //   body.classList.toggle('dark', toggle.mode === 'dark');
      // });
    </script>
  </body>
</html>
